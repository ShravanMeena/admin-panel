<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Admin Template</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <!-- Custom styles for this template -->
    <link href="css/simple-sidebar.css" rel="stylesheet" />
    <script type="text/javascript">
      document.addEventListener("DOMContentLoaded", (event) => {
        function getNotificationData() {
          //This code will show awailable notifications
          const apiUrl = "https://e-scholarapis.herokuapp.com/notification"; // site that doesn’t send Access-Control-*
          const proxyurl = "https://cors-anywhere.herokuapp.com/";
          fetch(proxyurl + apiUrl, {
            method: "GET",
            mode: "cors",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
            },
          }) // https://cors-anywhere.herokuapp.com/https://example.com
            .then((response) => response.text())
            .then((contents) => {
              console.log(`success  ${contents}`);
              var obj = JSON.parse(contents);
              var notification = document.querySelector("#notification");

              for (j = 0; j < obj.data.length; j++) {
                var parentDiv = document.createElement("div");
                var div1 = document.createElement("div");
                div1.innerHTML = obj.data[j].title;
                parentDiv.appendChild(div1);
                var div2 = document.createElement("div");
                var i1 = document.createElement("i");
                i1.setAttribute("class", "fa fa-trash");
                div2.appendChild(i1);
                var i2 = document.createElement("i");
                i2.setAttribute("class", "fa fa-edit");
                div2.appendChild(i2);
                parentDiv.appendChild(div2);
                notification.appendChild(parentDiv);
              }
            })
            .catch(() =>
              console.log(
                "Can’t access " + url + " response. Blocked by browser?"
              )
            );
        }

        document
          .querySelector("#addNotification")
          .addEventListener("click", () => {
            const title = document.querySelector("#title").value;
            const url = document.querySelector("#url").value;
            if (!title && !url) {
              document.querySelector("#failedMessage").innerHTML =
                "Please provide some inputs";
              return;
            }
            const data = { title: title, url: url };
            const apiUrl = "https://e-scholarapis.herokuapp.com/notification"; // site that doesn’t send Access-Control-*
            const proxyurl = "https://cors-anywhere.herokuapp.com/";
            fetch(proxyurl + apiUrl, {
              method: "POST",
              mode: "cors",
              headers: {
                "Content-Type": "application/json",
                Accept: "application/json",
              },
              body: JSON.stringify(data),
            })
              .then((response) => response.text())
              .then((contents) => {
                // var obj = JSON.parse(contents);
                // var notification = document.querySelector('#notification')
                document.querySelector("#successMessage").innerHTML =
                  "Data Entered Successfully";
              })
              .catch(() =>
                console.log(
                  "Can’t access " + url + " response. Blocked by browser?"
                )
              );

            getNotificationData();
          });
        getNotificationData();
      });
    </script>
    <style>
      #notification div {
        display: flex;
        justify-content: space-between;
        padding-left: 40px;
        padding-right: 40px;
      }
      @media only screen and (max-width: 768px) {
     
      .shadow{
        margin-top: 30px;
        padding-bottom: 50px;
        padding-top: 50px;
        
      }
      }
      .fa-trash {
        font-size: 22px;
        color: red;
        margin-right: 12px;
      }
      .fa-edit {
        font-size: 22px;
        color: #157af6;
      }
      .Maintitle {
        font-size: 30px;
      }
      .shadow{
        margin-top: 30px;
        padding-bottom: 50px;
        padding-top: 50px;
      }
    </style>
  </head>

  <body>
    <div class="d-flex" id="wrapper">
      <!-- Sidebar -->
      <div class="bg-light border-right" id="sidebar-wrapper">
        <div class="sidebar-heading">E-Scholor</div>
        <div class="list-group list-group-flush">
          <a href="#" class="list-group-item list-group-item-action bg-light" >Dashboard</a
          >
          <a href="#" class="list-group-item list-group-item-action bg-light">Shortcuts</a
          >
          <a href="#" class="list-group-item list-group-item-action bg-light" >Overview</a
          >
          <a href="#" class="list-group-item list-group-item-action bg-light"  >
          <a href="#" class="list-group-item list-group-item-action bg-light" >Profile</a
          >
          <a href="#" class="list-group-item list-group-item-action bg-light">Status</a
          >
        </div>
      </div>
      <!-- /#sidebar-wrapper -->

      <!-- Page Content -->
      <div id="page-content-wrapper">
        <nav
          class="navbar navbar-expand-lg navbar-light bg-light border-bottom"
        >
          <button class="btn btn-primary" id="menu-toggle">
            <div class="fa fa-bars"></div>
          </button>
        </nav>

        <div class="containerMain">
          <div class="container shadow">
            <div class="col-md-6 offset-md-3">
              <div class="text-center">
                <h1 class="Maintitle">Notifications Link</h1>
                <p id="successMessage" class="text-success"></p>
                <p id="failedMessage" class="text-danger"></p>
              </div>

              <div class="form-group">
                <input
                  type="text"
                  class="form-control"
                  id="title"
                  placeholder="title"
                />
              </div>
              <div class="form-group">
                <input
                  id="url"
                  type="text"
                  class="form-control"
                  placeholder="url"
                />
              </div>
              <button id="addNotification" class="btn btn-primary">
                Add Data
              </button>
            </div>

            <hr />
            <div id="notification" class="container"></div>
          </div>
        </div>
      </div>
      <!-- /#page-content-wrapper -->
    </div>
    <!-- /#wrapper -->

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Menu Toggle Script -->
    <script>
      $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
      });
    </script>
  </body>
</html>
